!function(a,n,o){"use strict";function l(t,e){this.$originalElement=t,this.options=e,this.metadata=this.$originalElement.data("sol-options")}l.defaults=(l.prototype={SOL_OPTION_FORMAT:{type:"option",value:void 0,selected:!1,disabled:!1,label:void 0,tooltip:void 0,cssClass:""},SOL_OPTIONGROUP_FORMAT:{type:"optiongroup",label:void 0,tooltip:void 0,disabled:!1,children:void 0},DATA_KEY:"sol-element",WINDOW_EVENTS_KEY:"sol-window-events",defaults:{data:void 0,name:void 0,texts:{noItemsAvailable:"No entries found",selectAll:"Select all",selectNone:"Select none",quickDelete:"&times;",searchplaceholder:"Click here to search",loadingData:"Still loading data...",itemsSelected:"{$a} items selected"},events:{onInitialized:void 0,onRendered:void 0,onOpen:void 0,onClose:void 0,onChange:void 0,onScroll:function(){var t=this.$input.offset().top-this.config.scrollTarget.scrollTop()+this.$input.outerHeight(!1),e=this.$selectionContainer.outerHeight(!1),i=t+e,i=this.config.displayContainerAboveInput||o.documentElement.clientHeight-this.config.scrollTarget.scrollTop()<i,s=this.$innerContainer.outerWidth(!1)-parseInt(this.$selectionContainer.css("border-left-width"),10)-parseInt(this.$selectionContainer.css("border-right-width"),10);i?(t=this.$input.offset().top-e-this.config.scrollTarget.scrollTop()+parseInt(this.$selectionContainer.css("border-bottom-width"),10),this.$container.removeClass("sol-selection-bottom").addClass("sol-selection-top")):this.$container.removeClass("sol-selection-top").addClass("sol-selection-bottom"),"block"!==this.$innerContainer.css("display")?s*=1.2:(this.$selectionContainer.css(e=i?"border-bottom-right-radius":"border-top-right-radius","initial"),this.$actionButtons&&this.$actionButtons.css(e,"initial")),this.$selectionContainer.css("top",Math.floor(t)).css("left",Math.floor(this.$container.offset().left)).css("width",s),this.config.displayContainerAboveInput=i}},selectAllMaxItemsThreshold:30,showSelectAll:function(){return this.config.multiple&&this.config.selectAllMaxItemsThreshold&&this.items&&this.items.length<=this.config.selectAllMaxItemsThreshold},useBracketParameters:!1,multiple:void 0,resultsContainer:void 0,closeOnClick:!0,showSelectionBelowList:!1,allowNullSelection:!1,scrollTarget:void 0,maxHeight:void 0,converter:void 0,asyncBatchSize:300,maxShow:0},init:function(){this.config=a.extend(!0,{},this.defaults,this.options,this.metadata);var t=this._getNameAttribute(),e=this;if(t)return"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),this.config.multiple=this.config.multiple||this.$originalElement.attr("multiple"),this.config.scrollTarget||(this.config.scrollTarget=a(n)),this._registerWindowEventsIfNeccessary(),this._initializeUiElements(),this._initializeInputEvents(),setTimeout(function(){e._initializeData(),e.$originalElement.data(e.DATA_KEY,e).removeAttr("name").data("sol-name",t)},0),this.$originalElement.hide(),this.$container.css("visibility","initial").show(),this;this._showErrorLabel("name attribute is required")},_getNameAttribute:function(){return this.config.name||this.$originalElement.data("sol-name")||this.$originalElement.attr("name")},_showErrorLabel:function(t){t=a('<div style="color: red; font-weight: bold;" />').html(t);this.$container?this.$container.append(t):t.insertAfter(this.$originalElement)},_registerWindowEventsIfNeccessary:function(){n[this.WINDOW_EVENTS_KEY]||(a(o).click(function(t){var e,t=a(t.target),i=t.closest(".sol-selection-container"),t=t.closest(".sol-inner-container");t.length?e=t.first().parent(".sol-container"):i.length&&(e=i.first().parent(".sol-container")),a(".sol-active").not(e).each(function(t,e){a(e).data(l.prototype.DATA_KEY).close()})}),n[this.WINDOW_EVENTS_KEY]=!0)},_initializeUiElements:function(){var e=this,t=(this.internalScrollWrapper=function(){a.isFunction(e.config.events.onScroll)&&e.config.events.onScroll.call(e)},this.$input=a('<input type="text"/>').attr("placeholder",this.config.texts.searchplaceholder),this.$noResultsItem=a('<div class="sol-no-results"/>').html(this.config.texts.noItemsAvailable).hide(),this.$loadingData=a('<div class="sol-loading-data"/>').html(this.config.texts.loadingData),this.$xItemsSelected=a('<div class="sol-results-count"/>'),this.$caret=a('<div class="sol-caret-container"><b class="sol-caret"/></div>').click(function(t){return e.toggle(),t.preventDefault(),!1}),a('<div class="sol-input-container"/>').append(this.$input)),t=(this.$innerContainer=a('<div class="sol-inner-container"/>').append(t).append(this.$caret),this.$selection=a('<div class="sol-selection"/>'),this.$selectionContainer=a('<div class="sol-selection-container"/>').append(this.$noResultsItem).append(this.$loadingData).append(this.$selection),this.$container=a('<div class="sol-container"/>').hide().data(this.DATA_KEY,this).append(this.$selectionContainer).append(this.$innerContainer).insertBefore(this.$originalElement),this.$showSelectionContainer=a('<div class="sol-current-selection"/>'),this.config.resultsContainer||this.$innerContainer),t=(this.config.resultsContainer?this.$showSelectionContainer.appendTo(t):this.config.showSelectionBelowList?this.$showSelectionContainer.insertAfter(t):this.$showSelectionContainer.insertBefore(t),this.config.maxHeight&&this.$selection.css("max-height",this.config.maxHeight),this.$originalElement.attr("class")),i=this.$originalElement.attr("style"),s=[];if(t&&0<t.length)for(var n=t.split(/\s+/),o=0;o<n.length;o++)this.$container.addClass(n[o]);if(i&&0<i.length)for(s=i.split(/\;/),o=0;o<s.length;o++){var l=s[o].split(/\s*\:\s*/g);2===l.length&&(0<=l[0].toLowerCase().indexOf("height")?this.$innerContainer:this.$container).css(l[0].trim(),l[1].trim())}"block"!==this.$originalElement.css("display")&&this.$container.css("width",this._getActualCssPropertyValue(this.$originalElement,"width")),a.isFunction(this.config.events.onRendered)&&this.config.events.onRendered.call(this,this)},_getActualCssPropertyValue:function(t,e){var i=t.get(0),s=t.css("display");return t.css("display","none"),i.currentStyle?i.currentStyle[e]:n.getComputedStyle?o.defaultView.getComputedStyle(i,null).getPropertyValue(e):(t.css("display",s),t.css(e))},_initializeInputEvents:function(){var e,l=this,t=this.$input.parents("form").first();t&&1===t.length&&!t.data(this.WINDOW_EVENTS_KEY)&&(e=function(){var s=[];t.find(".sol-option input").each(function(t,e){var e=a(e),i=e.data("sol-item").selected;e.prop("checked")!==i&&(e.prop("checked",i).trigger("sol-change",!0),s.push(e))}),0<s.length&&a.isFunction(l.config.events.onChange)&&l.config.events.onChange.call(l,l,s)},t.on("reset",function(t){e.call(l),setTimeout(function(){e.call(l)},100)}),t.data(this.WINDOW_EVENTS_KEY,!0)),this.$input.focus(function(){l.open()}).on("propertychange input",function(t){var e=!0;(e="propertychange"==t.type?"value"==t.originalEvent.propertyName.toLowerCase():e)&&l._applySearchTermFilter()}),this.$container.on("keydown",function(t){var e=t.keyCode;if(!l.$noResultsItem.is(":visible")){var i,s,n=!1,o=l.$selection.find(".sol-option:visible");if(40===e||38===e?(l._setKeyBoardNavigationMode(!0),i=l.$selection.find(".sol-option.keyboard-selection"),s=38===e?-1:1,(s=o.index(i)+s)<0?s=o.length-1:s>=o.length&&(s=0),i.removeClass("keyboard-selection"),o=a(o[s]).addClass("keyboard-selection"),l.$selection.scrollTop(l.$selection.scrollTop()+o.position().top),n=!0):!0===l.keyboardNavigationMode&&32===e&&((i=l.$selection.find(".sol-option.keyboard-selection input")).prop("checked",!i.prop("checked")).trigger("change"),n=!0),n)return t.preventDefault(),!1}}).on("keyup",function(t){t=t.keyCode;27===t&&(!0===l.keyboardNavigationMode?l._setKeyBoardNavigationMode(!1):""===l.$input.val()?(l.$caret.trigger("click"),l.$input.trigger("blur")):l.$input.val("").trigger("input"))})},_setKeyBoardNavigationMode:function(t){t?(this.keyboardNavigationMode=!0,this.$selection.addClass("sol-keyboard-navigation")):(this.keyboardNavigationMode=!1,this.$selection.find(".sol-option.keyboard-selection"),this.$selection.removeClass("sol-keyboard-navigation"),this.$selectionContainer.find(".sol-option.keyboard-selection").removeClass("keyboard-selection"),this.$selection.scrollTop(0))},_applySearchTermFilter:function(){var t;this.items&&0!==this.items.length&&(t=(this.$input.val()||"").toLowerCase(),this.$selectionContainer.find(".sol-filtered-search").removeClass("sol-filtered-search"),this._setNoResultsItemVisible(!1),0<t.trim().length&&this._findTerms(this.items,t),a.isFunction(this.config.events.onScroll))&&this.config.events.onScroll.call(this)},_findTerms:function(t,s){var n;t&&a.isArray(t)&&0!==t.length&&((n=this)._setKeyBoardNavigationMode(!1),a.each(t,function(t,e){var i;"option"===e.type?(i=e.displayElement,-1===(e.label+" "+e.tooltip).trim().toLowerCase().indexOf(s)&&i.addClass("sol-filtered-search")):(n._findTerms(e.children,s),0===e.displayElement.find(".sol-option:not(.sol-filtered-search)").length&&e.displayElement.addClass("sol-filtered-search"))}),this._setNoResultsItemVisible(0===this.$selectionContainer.find(".sol-option:not(.sol-filtered-search)").length))},_initializeData:function(){this.config.data?a.isFunction(this.config.data)?this.items=this._fetchDataFromFunction(this.config.data):a.isArray(this.config.data)?this.items=this._fetchDataFromArray(this.config.data):"string"==typeof this.config.data?this._loadItemsFromUrl(this.config.data):this._showErrorLabel("Unknown data type"):this.items=this._detectDataFromOriginalElement(),this.items&&this._processDataItems(this.items)},_detectDataFromOriginalElement:function(){var n,o,t;return"select"===this.$originalElement.prop("tagName").toLowerCase()?(o=[],a.each((n=this).$originalElement.children(),function(t,e){var i,e=a(e),s=e.prop("tagName").toLowerCase();"option"===s?(i=n._processSelectOption(e))&&o.push(i):"optgroup"===s?(i=n._processSelectOptgroup(e))&&o.push(i):n._showErrorLabel("Invalid element found in select: "+s+". Only option and optgroup are allowed")}),this._invokeConverterIfNeccessary(o)):this.$originalElement.data("sol-data")?(t=this.$originalElement.data("sol-data"),this._invokeConverterIfNeccessary(t)):void this._showErrorLabel('Could not determine data from original element. Must be a select or data must be provided as data-sol-data="" attribute')},_processSelectOption:function(t){return a.extend({},this.SOL_OPTION_FORMAT,{value:t.val(),selected:t.prop("selected"),disabled:t.prop("disabled"),cssClass:t.attr("class"),label:t.html(),tooltip:t.attr("title"),element:t})},_processSelectOptgroup:function(t){var i=this,s=a.extend({},this.SOL_OPTIONGROUP_FORMAT,{label:t.attr("label"),tooltip:t.attr("title"),disabled:t.prop("disabled"),children:[]}),t=t.children("option");return a.each(t,function(t,e){e=a(e),e=i._processSelectOption(e);s.disabled&&(e.disabled=!0),s.children.push(e)}),s},_fetchDataFromFunction:function(t){return this._invokeConverterIfNeccessary(t(this))},_fetchDataFromArray:function(t){return this._invokeConverterIfNeccessary(t)},_loadItemsFromUrl:function(s){var n=this;a.ajax(s,{success:function(t){n.items=n._invokeConverterIfNeccessary(t),n.items&&n._processDataItems(n.items)},error:function(t,e,i){n._showErrorLabel("Error loading from url "+s+": "+i)},dataType:"json"})},_invokeConverterIfNeccessary:function(t){return a.isFunction(this.config.converter)?this.config.converter.call(this,this,t):t},_processDataItems:function(i){var s,n,o,l;i?0===i.length?(this._setNoResultsItemVisible(!0),this.$loadingData.remove()):(s=this,n=0,o=function(){this.$loadingData.remove(),this._initializeSelectAll(),a.isFunction(this.config.events.onInitialized)&&this.config.events.onInitialized.call(this,this,i)},(l=function(){for(var t,e=0;e++<s.config.asyncBatchSize&&n<i.length;)if((t=i[n++]).type===s.SOL_OPTION_FORMAT.type)s._renderOption(t);else{if(t.type!==s.SOL_OPTIONGROUP_FORMAT.type)return void s._showErrorLabel("Invalid item type found "+t.type);s._renderOptiongroup(t)}n>=i.length?o.call(s):setTimeout(l,0)}).call(this)):this._showErrorLabel("Data items not present. Maybe the converter did not return any values")},_renderOption:function(t,e){var i,s=this,e=e||this.$selection,n=a('<div class="sol-label-text"/>').html(0===t.label.trim().length?"&nbsp;":t.label).addClass(t.cssClass),o=this._getNameAttribute();this.config.multiple?(i=a('<input type="checkbox" class="sol-checkbox"/>'),this.config.useBracketParameters&&(o+="[]")):i=a('<input type="radio" class="sol-radio"/>').on("change",function(){s.$selectionContainer.find('input[type="radio"][name="'+o+'"]').not(a(this)).trigger("sol-deselect")}).on("sol-deselect",function(){s._removeSelectionDisplayItem(a(this))}),i.on("change",function(t,e){a(this).trigger("sol-change",e)}).on("sol-change",function(t,e){s._selectionChange(a(this),e)}).data("sol-item",t).prop("checked",t.selected).prop("disabled",t.disabled).attr("name",o).val(t.value),n=a('<label class="sol-label"/>').attr("title",t.tooltip).append(i).append(n),n=a('<div class="sol-option"/>').append(n),t.displayElement=n,e.append(n),t.selected&&this._addSelectionDisplayItem(i)},_renderOptiongroup:function(t){var i=this,e=a('<div class="sol-optiongroup-label"/>').attr("title",t.tooltip).html(t.label),s=a('<div class="sol-optiongroup"/>').append(e);t.disabled&&s.addClass("disabled"),a.isArray(t.children)&&a.each(t.children,function(t,e){i._renderOption(e,s)}),t.displayElement=s,this.$selection.append(s)},_initializeSelectAll:function(){var e,t,i;(!0===this.config.showSelectAll||a.isFunction(this.config.showSelectAll)&&this.config.showSelectAll.call(this))&&(e=this,t=a('<a href="#" class="sol-deselect-all"/>').html(this.config.texts.selectNone).click(function(t){return e.deselectAll(),t.preventDefault(),!1}),i=a('<a href="#" class="sol-select-all"/>').html(this.config.texts.selectAll).click(function(t){return e.selectAll(),t.preventDefault(),!1}),this.$actionButtons=a('<div class="sol-action-buttons"/>').append(i).append(t).append('<div class="sol-clearfix"/>'),this.$selectionContainer.prepend(this.$actionButtons))},_selectionChange:function(i,t){this.$originalElement&&"select"===this.$originalElement.prop("tagName").toLowerCase()&&(s=this).$originalElement.find("option").each(function(t,e){e=a(e);e.val()===i.val()&&(e.prop("selected",i.prop("checked")),s.$originalElement.trigger("change"))}),i.prop("checked")?this._addSelectionDisplayItem(i):this._removeSelectionDisplayItem(i),this.config.multiple?this.config.scrollTarget.trigger("scroll"):this.close();var s,e,n=this.$showSelectionContainer.children(".sol-selected-display-item");0!=this.config.maxShow&&n.length>this.config.maxShow?(n.hide(),e=this.config.texts.itemsSelected.replace("{$a}",n.length),this.$xItemsSelected.html('<div class="sol-selected-display-item-text">'+e+"<div>"),this.$showSelectionContainer.append(this.$xItemsSelected),this.$xItemsSelected.show()):(n.show(),this.$xItemsSelected.hide()),!t&&a.isFunction(this.config.events.onChange)&&this.config.events.onChange.call(this,this,i)},_addSelectionDisplayItem:function(t){var e,i=t.data("sol-item");i.displaySelectionItem||(e=a('<span class="sol-selected-display-item-text" />').html(i.label),e=a('<div class="sol-selected-display-item"/>').append(e).attr("title",i.tooltip).appendTo(this.$showSelectionContainer),!this.config.multiple&&!this.config.allowNullSelection||t.prop("disabled")||a('<span class="sol-quick-delete"/>').html(this.config.texts.quickDelete).click(function(){t.prop("checked",!1).trigger("change")}).prependTo(e),i.displaySelectionItem=e)},_removeSelectionDisplayItem:function(t){var t=t.data("sol-item"),e=t.displaySelectionItem;e&&(e.remove(),t.displaySelectionItem=void 0)},_setNoResultsItemVisible:function(t){t?(this.$noResultsItem.show(),this.$selection.hide(),this.$actionButtons&&this.$actionButtons.hide()):(this.$noResultsItem.hide(),this.$selection.show(),this.$actionButtons&&this.$actionButtons.show())},isOpen:function(){return this.$container.hasClass("sol-active")},isClosed:function(){return!this.isOpen()},toggle:function(){this.isOpen()?this.close():this.open()},open:function(){this.isClosed()&&(this.$container.addClass("sol-active"),this.config.scrollTarget.bind("scroll",this.internalScrollWrapper).trigger("scroll"),a(n).on("resize",this.internalScrollWrapper),a.isFunction(this.config.events.onOpen))&&this.config.events.onOpen.call(this,this)},close:function(){this.isOpen()&&(this._setKeyBoardNavigationMode(!1),this.$container.removeClass("sol-active"),this.config.scrollTarget.unbind("scroll",this.internalScrollWrapper),a(n).off("resize"),this.$input.val(""),this._applySearchTermFilter(),this.config.displayContainerAboveInput=void 0,a.isFunction(this.config.events.onClose))&&this.config.events.onClose.call(this,this)},selectAll:function(){var t;this.config.multiple&&(t=this.$selectionContainer.find('input[type="checkbox"]:not([disabled], :checked)').prop("checked",!0).trigger("change",!0),this.config.closeOnClick&&this.close(),a.isFunction(this.config.events.onChange))&&this.config.events.onChange.call(this,this,t)},invert:function(){var t,e;this.config.multiple&&(t=this.$selectionContainer.find('input[type="checkbox"]:not([disabled], :checked)'),(e=this.$selectionContainer.find('input[type="checkbox"]').filter("[disabled], :checked")).prop("checked",!1).trigger("change",!0),t.prop("checked",!0).trigger("change",!0),this.options.closeOnClick&&this.close(),a.isFunction(this.config.events.onChange))&&this.config.events.onChange.call(this,this,e.add(t))},deselectAll:function(){var t;this.config.multiple&&(t=this.$selectionContainer.find('input[type="checkbox"]:not([disabled]):checked').prop("checked",!1).trigger("change",!0),this.config.closeOnClick&&this.close(),a.isFunction(this.config.events.onChange))&&this.config.events.onChange.call(this,this,t)},getSelection:function(){return this.$selection.find("input:checked")}}).defaults,n.SearchableOptionList=l,a.fn.searchableOptionList=function(s){var n=[];return this.each(function(){var t,e=a(this),i=e.data(l.prototype.DATA_KEY);i?n.push(i):(t=new l(e,s),n.push(t),setTimeout(function(){t.init()},0))}),1===n.length?n[0]:n}}(jQuery,window,document);